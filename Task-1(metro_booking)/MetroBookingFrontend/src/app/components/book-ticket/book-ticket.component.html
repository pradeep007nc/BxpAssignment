<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4">Book Ticket</h2>
  <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()" class="max-w-md">
    <div class="mb-4">
      <label class="block mb-2">Email</label>
      <input type="email" formControlName="passengerEmail"
             class="w-full p-2 border rounded">
      @if (bookingForm.get('passengerEmail')?.errors?.['email']) {
        <div class="text-red-500 mt-1">
          Please enter a valid email
        </div>
      }
    </div>

    <div class="mb-4">
      <label class="block mb-2">From Station</label>
      <select formControlName="fromStationNumber"
              class="w-full p-2 border rounded">
        <option value="">Select Station</option>
        @for (station of stations; track station.stationNumber) {
          <option [value]="station.stationNumber">
            {{station.stationName}}
          </option>
        }
      </select>
    </div>

    <div class="mb-4">
      <label class="block mb-2">To Station</label>
      <select formControlName="toStationNumber"
              class="w-full p-2 border rounded">
        <option value="">Select Station</option>
        @for (station of stations; track station.stationNumber) {
          <option [value]="station.stationNumber">
            {{station.stationName}}
          </option>
        }
      </select>
    </div>

    <button type="submit" [disabled]="!bookingForm.valid"
            class="bg-blue-500 text-white px-4 py-2 rounded">
      Book Ticket
    </button>
  </form>

  @if (bookingResponse) {
    <div class="mt-4 p-4 bg-green-100 rounded">
      <p>Ticket Reference: {{bookingResponse.ticketReferenceNumber}}</p>
      <p>Price: â‚¹{{bookingResponse.price}}</p>
      <p>{{bookingResponse.message}}</p>
    </div>
  }
</div>
